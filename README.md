## Технологии:

- Python 3.11
- Fastapi 0.78.0
- fastapi-users 10.0.6
- SQLalchemy 1.4.36
- Alembic 1.7.7
- Uvicorn 0.17.6

## Описание проекта QRKot:

Приложение для Благотворительного фонда поддержки котиков QRKot.

Фонд собирает пожертвования на различные целевые проекты: на медицинское
обслуживание нуждающихся хвостатых, на обустройство кошачьей колонии
в подвале, на корм оставшимся без попечения кошкам — на любые цели,
связанные с поддержкой кошачьей популяции.

### Проекты

В Фонде QRKot может быть открыто несколько целевых проектов.
У каждого проекта есть название, описание и сумма, которую планируется собрать.
После того, как нужная сумма собрана — проект закрывается.

Пожертвования в проекты поступают по принципу First In, First Out:
все пожертвования идут в проект, открытый раньше других; когда этот
проект набирает необходимую сумму и закрывается — пожертвования начинают
поступать в следующий проект.

### Пожертвования

Каждый пользователь может сделать пожертвование и сопроводить его комментарием.
Пожертвования не целевые: они вносятся в фонд, а не в конкретный проект.
Каждое полученное пожертвование автоматически добавляется в первый открытый
проект, который ещё не набрал нужную сумму. Если пожертвование больше нужной
суммы или же в Фонде нет открытых проектов — оставшиеся деньги ждут открытия
следующего проекта. При создании нового проекта все неинвестированные
пожертвования автоматически вкладываются в новый проект.

### Пользователи

Целевые проекты создаются администраторами сайта.

Любой пользователь может видеть список всех проектов, включая требуемые и
уже внесенные суммы. Это касается всех проектов — и открытых, и закрытых.

Зарегистрированные пользователи могут отправлять пожертвования и просматривать
список своих пожертвований.

## Установка
- Создание и активация виртуального окружения
```
В корне проекта:

python3.11 -m venv venv - создает окружение
source venv/bin/activate - активация окружения
```

- Выполнить установку зависимостей в окружении

```console
pip install -r requirements.txt
```

- Инициализировать миграции Alembic

```console
alembic init --template async alembic
```

### Автоматическое создание миграции
```console
alembic revision --autogenerate -m "First migration"
```
### Приминение миграций
```
alembic upgrade head
alembic upgrade befcaa650c3f - применение определенной миграции
```
### Отмена миграций
```
alembic downgrade base
```

### Запуск приложения
```
uvicorn app.main:app --reload
```

### Сервис будет запущен и доступен по следующим адресам:
- http://127.0.0.1:8000/docs - автоматически сгенерированная документация Swagger
- http://127.0.0.1:8000/redoc - автоматически сгенерированная документация ReDoc

После запуска доступны следующие эндпоинты:
- Регистрация и аутентификация:
    - **/auth/register** - регистрация пользователя
    - **/auth/jwt/login** - аутентификация пользователя (получение jwt-токена)
    - **/auth/jwt/logout** - выход (сброс jwt-токена)
- Пользователи:
    - **/users/me** - получение и изменение данных аутентифицированного пользователя
    - **/users/{id}** - получение и изменение данных пользователя по id
- Благотворительные проекты:
    - **/charity_project/** - получение списка проектов и создание нового
    - **/charity_project/{project_id}** - изменение и удаление существующего проекта
- Пожертвования:
    - **/donation/** - получение списка всех пожертвований и создание пожертвования
    - **/donation/my** - получение списка всех пожертвований аутентифицированного пользователя

Со схемами запросов и ответов можно ознакомиться в документации или в файле со спецификацией - openapi.json.